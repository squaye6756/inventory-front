<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="InventoryApp">
    <head>
        <meta charset="utf-8">
        <title>Inventorial</title>
        <link rel="stylesheet" href="styles.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.2/angular.min.js"></script>
        <script src="app.js" charset="utf-8"></script>
    </head>
    <body ng-controller='Controller as ctrl'>
        <div class="" ng-if='!ctrl.loggedInUser'>
            <h1>Log In:</h1>
            <form ng-submit='ctrl.login()'>
                <!-- {{ctrl.usernameId}} - {{ctrl.passwordId}} -->
                <label for="username">Username: </label>
                <input type="text" name="username" ng-model="ctrl.usernameId"/>
                <label for="password">Password: </label>
                <input type="password" name="password" ng-model="ctrl.passwordId"/>
                <input type="submit" value="Log In"/>
            </form>

            <h1>Sign Up:</h1>
            <form ng-submit='ctrl.createUser()'>
                <!-- {{ctrl.username}} - {{ctrl.password}} -->
                <label for="username">Create Username: </label>
                <input type="text" name="username" ng-model="ctrl.username"/>
                <label for="password">Create Password: </label>
                <input type="password" name="password" ng-model="ctrl.password"/>
                <input type="submit" value="Sign Up"/>
            </form>
        </div>

        <div ng-if='ctrl.loggedInUser.username'>
            <div class="intro">
                <h1>Welcome, {{ctrl.loggedInUser.username}}</h1>
                <button ng-click='ctrl.logout()'>Logout</button>
            </div>

            <div id='show-hide-btns'>
                <button ng-click='ctrl.toggleDisplayAdd($event)'>Add Item</button>
                <button ng-click='ctrl.toggleDisplayItems($event)'>Hide All Items</button>
                <button ng-click='ctrl.toggleDisplaySearch($event)'>Search Items</button>
            </div>

            <div id='search-div'>
                <h1>Item Search</h1>
                <form ng-submit='ctrl.search()'>
                    <label for="name">Product Name: </label>
                    <input type="text" name="name" value="item.name" ng-model="ctrl.nameSearch"/>
                    <label for="price">Price: </label>
                    <input type="number" name="price" min="0" ng-model="ctrl.priceSearch"/>
                    <label for="quantity">Quantity: </label>
                    <input type="number" name="quantity" min="0" ng-model="ctrl.quantitySearch"/>
                    <input type="submit" value="Search"/>
                </form>
            </div>

            <div id="add-item-div">
                <h1>Add Item</h1>
                <form id='add-item-form' ng-submit='ctrl.addItem()'>
                    <label for="name">Product Name: </label>
                    <input type="text" name="name" ng-model="ctrl.name"/>
                    <label for="price">Price: </label>
                    <input type="number" name="price" min="0" ng-model="ctrl.price"/>
                    <label for="quantity">Quantity: </label>
                    <input type="number" name="quantity" min="0" ng-model="ctrl.quantity"/>
                    <input type="submit" value="Add Item"/>
                </form>
            </div>

            <div id='all-items' ng-if='ctrl.itemList.length > 0'>
                <h1>Items</h1>
                <div ng-repeat='item in ctrl.itemList'>
                    <h3>{{item.name}}</h3>
                    <p>Price: ${{item.price}}</p>
                    <p>Quantity: {{item.quantity}}</p>
                    <!-- <div class="buttons"> -->
                        <button ng-click='ctrl.deleteItem(item.id)'>REMOVE</button>
                        <button ng-click='ctrl.decrementQuantity(item)'>DECR</button>
                        <button ng-click='ctrl.incrementQuantity(item)'>INCR</button>
                    <!-- </div> -->
                    <details>
                        <summary>Edit Item</summary>
                        <form ng-submit='ctrl.handlePut(item)'>
                            <label for="name">Product Name: </label>
                            <input type="text" name="name" value="item.name" ng-model="ctrl.nameEdit"/>
                            <label for="price">Price: </label>
                            <input type="number" name="price" min="0" ng-model="ctrl.priceEdit"/>
                            <label for="quantity">Quantity: </label>
                            <input type="number" name="quantity" min="0" ng-model="ctrl.quantityEdit"/>
                            <input type="submit" value="Submit Edits"/>
                        </form>
                    </details>
                </div>
            </div>
        </div>

    </body>
</html>
